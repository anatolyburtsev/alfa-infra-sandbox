- name: install mesosphere keys
  apt_key: keyserver=hkp://keyserver.ubuntu.com:80 id=E56151BF

- name: add mesosphere repo
  apt_repository: repo="deb http://repos.mesosphere.com/ubuntu trusty main"

- name: install mesos
  apt: name=mesos

- name: install marathon
  apt:
    name: marathon=1.3.10-1.0.627.ubuntu1404


- name: set zookeeper for mesos
  copy: dest=/etc/mesos/zk content="zk://{{ ansible_hostname }}:2181/mesos"

- name: set mesos hostname
  copy: dest=/etc/mesos-master/hostname content="{{ ansible_hostname }}"

- name: set mesos ip
  copy: dest=/etc/mesos-master/ip content="{{ ansible_eth1.ipv4.address }}"

- name: set mesos quorum size
  copy: dest=/etc/mesos-master/quorum content=1

- name: start mesos master
  service: name=mesos-master state=restarted enabled=yes
